<!DOCTYPE html>
<html>
  <head>
    <title>dquery docs</title>
    <style>
    body { 
      font-family: helvetica, arial; 
      font-size: 14px; 
      max-width: 700px;
      margin: 0 auto;
      color: #333;
    }
    a { color: #05a; }
    a:hover { background: #05a; color: #fff; text-decoration: none; }
    .method-list a {
      display: inline-block;
      padding: 0 7px;
    }
    h1, h2 { border-bottom: 2px solid #ccc; }
    p { 
      margin: 15px 0;
    }
    h2 {
      margin-top: 40px;
    }
    h3 { 
      font-family: georgia, "times new roman", serif;
      margin: 0;
      padding: 5px 0 5px 0; 
      margin-top: 15px;
      background: #eee;
    }
    h3 + h3 { 
      margin-top: 0px;
    }
    span.result { background: #fde; }
    .example { 
      border: 1px solid #dfdfdf;
      background: #f2f2f2; 
      margin: 5px 20px 30px 20px;
      padding: 5px;
      max-width: 500px;
      overflow: auto;
      font-size: 12px;
      color: #000;
      -webkit-border-radius: 10px;
      -moz-border-radius: 10px;
      border-radius: 10px;
    }
    table {
      margin-left: 20px;
      border-collapse: collapse;
      -webkit-box-shadow: 0 0 4px #ddd;
      margin-bottom: 30px;
    }
    td { 
      background: #fff;
      padding: 5px;
      border: 1px solid #ddd;
    }

    #menu ul {
      list-style-type: none;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    #menu ul li {
      display: inline-block;
      padding: 0;
      margin: 0;
    }
    #menu ul li a {
      display: block;
      padding: 10px;
    }
    #menu {
      background: #eee;
      margin: 20px 0;
      padding: 1px 0;
      border-top: 3px double #000;
      border-bottom: 3px double #000;
    }
    </style>
  </head>
<body>
  <nav id="menu">
    <ul>
      <li><a href="https://github.com/torholm/dquery">Repository</a></li>
      <li><a href="https://torholm.github.com/dquery/">Documentation</a></li>
    </ul>
  </nav>
  <h1>dquery documentation</h1>
  <p class="method-list">
    <strong>dquery object functions:</strong><br />
    <a href="#addDays">addDays</a>
    <a href="#addHours">addHours</a> 
    <a href="#addMilliseconds">addMilliseconds</a>
    <a href="#addMinutes">addMinutes</a>
    <a href="#addMonths">addMonths</a>
    <a href="#addSeconds">addSeconds</a>
    <a href="#addWeeks">addWeeks</a>
    <a href="#addYears">addYears</a>
    <a href="#clone">clone</a> 
    <a href="#daysInMonth">daysInMonth</a>
    <a href="#daysOfMonth">daysOfMonth</a>
    <a href="#daysOfWeek">daysOfWeek</a>
    <a href="#firstDayOfMonth">firstDayOfMonth</a>
    <a href="#firstDayOfYear">firstDayOfYear</a>
    <a href="#firstWeek">firstWeek</a>
    <a href="#format">format</a>
    <a href="#getWeek">getWeek</a>
    <a href="#isLeapYear">isLeapYear</a>
    <a href="#isTomorrow">isTomorrow</a>
    <a href="#isYesterday">isYesterday</a>
    <a href="#lastDayOfMonth">lastDayOfMonth</a>
    <a href="#lastDayOfYear">lastDayOfYear</a>
    <a href="#next">next</a>
    <a href="#prev">prev</a>
    <a href="#resetDate">resetDate</a>
    <a href="#resetTime">resetTime</a>
    <a href="#sameDate">sameDate</a>
    <a href="#set">set</a>
    <a href="#setWeek">setWeek</a>
  </p>
  <p class="method-list">
    <strong>dquery core:</strong><br />
    <a href="#dquery">dquery</a>
    <a href="#dquery.collect">dquery.collect</a>
    <a href="#dquery.iterate">dquery.iterate</a>
  </p>
  <p class="method-list">
    <strong>i8n:</strong><br />
    <a href="#dquery.i8n.ampm">dquery.i8n.ampm</a>
    <a href="#dquery.i8n.weekdays">dquery.i8n.weekdays</a>
    <a href="#dquery.i8n.weekstart">dquery.i8n.weekstart</a>
    <a href="#dquery.i8n.months">dquery.i8n.months</a>
  </p>
  <p class="method-list">
    <strong>dquery.DateList object:</strong><br />
    <a href="#dquery.DateList">dquery.DateList</a>
    <a href="#dquery.DateList.each">each</a>
    <a href="#dquery.DateList.map">map</a>
  </p>

  <h2>dquery object functions</h2>

  <a name="addDays"></a>
  <h3>addDays( days )</h3>
  <p> Adds days to current date. </p>
  <h4>Example</h4>
  <pre class="example">dquery("2011-09-09").addDays(5);</pre>

  <a name="addHours"></a>
  <h3>addHours( hours )</h3>
  <p> Adds hours to current date. </p>
  <h4>Example</h4>
  <pre class="example">dquery("2011-09-09").addHours(10);</pre>

  <a name="addMilliseconds"></a>
  <h3>addMilliseconds( milliSecs )</h3>
  <p>Adds milliseconds to current date.</p>
  <h4>Example</h4>
  <pre class="example">dquery("2011-09-09").addMilliseconds(20);</pre>

  <a name="addMinutes"></a>
  <h3>addMinutes( minutes )</h3>
  <p>Adds minutes to current date.</p>
  <h4>Example</h4>
  <pre class="example">dquery("2011-09-09").addMinutes(50);</pre>

  <a name="addMonths"></a>
  <h3>addMonths( months )</h3>
  <p>Adds months to current date.</p>
  <p><strong>Note!</strong> If you change to a month that have fewer days than the current date, the date will be the last day of the new month.</p>
  <h4>Example</h4>
  <pre class="example">dquery("2011-09-09").addMonths(20)</pre>

  <a name="addSeconds"></a>
  <h3>addSeconds( seconds )</h3>
  <p>Adds seconds to current date.</p>
  <h4>Example</h4>
  <pre class="example">dquery("2011-09-09").addSeconds(20);</pre>

  <a name="addWeeks"></a>
  <h3>addWeeks( weeks )</h3>
  <p>Adds weeks to current date.</p>
  <h4>Example</h4>
  <pre class="example">dquery("2011-09-09").addWeeks(4);</pre>

  <a name="addYears"></a>
  <h3>addYears( years )</h3>
  <p>Adds years to current date.</p>
  <h4>Example</h4>
  <pre class="example">dquery("2011-09-09").addYears(9);</pre>

  <a name="clone"></a>
  <h3>clone()</h3>
  <p>Creates an exact clone -- a new instance -- of current date.</p>
  <p>
    Use this, for example, to get a throw-away instance that you can
    mess around with without modifying the original date.
  </p>
  <h4>Example</h4>
  <pre class="example">var foo = dquery();
var bar = foo.clone();</pre>

  <a name="daysInMonth"></a>
  <h3>daysInMonth()</h3>
  <p>Returns the amount of days of the current date's month.</p>
  <h4>Example</h4>
  <pre class="example">var daysInSeptember = dquery("2011-09-01").daysInMonth();</pre>

  <a name="daysOfMonth"></a>
  <h3>daysOfMonth()</h3>
  <p>Returns a <a href="#dquery.DateList">date list</a> of all the days of the current month.</p>
  <h4>Example</h4>
  <pre class="example">var days = dquery().daysOfMonth();
days.each(function(date) { 
  alert(date);
});</pre>

  <a name="daysOfWeek"></a>
  <h3>daysOfWeek()</h3>
  <p>Returns a <a href="#dquery.DateList">date list</a> of all the days of the current date's week.</p>
  <h4>Example</h4>
  <pre class="example">var days = dquery().daysOfWeek();
days.each(function(date) {
  alert(date);
});</pre>

  <a name="firstDayOfMonth"></a>
  <h3>firstDayOfMonth()</h3>
  <p>Changes the day to the first day of the current date's month.</p>
  <h4>Example</h4>
  <pre class="example">var foo = dquery().firstDayOfMonth();</pre>

  <a name="firstDayOfYear"></a>
  <h3>firstDayOfYear()</h3>
  <p>Changes the day to the first day of the current date's year.</p>
  <h4>Example</h4>
  <pre class="example">var foo = dquery().firstDayOfYear();</pre>

  <a name="firstWeek"></a>
  <h3>firstWeek()</h3>
  <p>Changes to the first week of the year.</p>
  <h4>Example</h4>
  <pre class="example">var bar = dquery().firstWeek();</pre>

  <a name="format"></a>
  <h3>format( formatString )</h3>
  <p>Formats the current date according to the rules specified by the formatString.</p>
  <table>
    <tr><td valign="top">HH</td><td valign="top">Hour (00-23)</td></tr>
    <tr><td valign="top">H</td><td valign="top">Hour (0-23)</td></tr>
    <tr><td valign="top">h</td><td valign="top">Hour (0-12)</td></tr>
    <tr><td valign="top">hh</td><td valign="top">Hour (00-12)</td></tr>
    <tr><td valign="top">M</td><td valign="top">Minute (0-59)</td></tr>
    <tr><td valign="top">MM</td><td valign="top">Minute (00-59)</td></tr>
    <tr><td valign="top">s</td><td valign="top">Second (0-59)</td></tr>
    <tr><td valign="top">ss</td><td valign="top">Second (00-59)</td></tr>
    <tr><td valign="top">yy</td><td valign="top">Year (00-99)</td></tr>
    <tr><td valign="top">yyyy</td><td valign="top">Year (0000-9999)</td></tr>
    <tr><td valign="top">m</td><td valign="top">Month (1-12)</td></tr>
    <tr><td valign="top">mm</td><td valign="top">Month (01-12)</td></tr>
    <tr><td valign="top">mmm</td><td valign="top">Month (Jan-Feb)</td></tr>
    <tr><td valign="top">mmmm</td><td valign="top">Month (January-February)</td></tr>
    <tr><td valign="top">dddd</td><td valign="top">Day (Monday-Sunday)</td></tr>
    <tr><td valign="top">ddd</td><td valign="top">Day (Mon-Sun)</td></tr>
    <tr><td valign="top">dd</td><td valign="top">Day (01-31)</td></tr>
    <tr><td valign="top">d</td><td valign="top">Day (1-31)</td></tr>
    <tr><td valign="top">a</td><td valign="top">AM/PM</td></tr>
  </table>
  <h4>Example</h4>
  <pre class="example">dquery().format("yyyy-mm-dd");
dquery().format("d mmm yyyy, hh:MMa");</pre>

  <a name="getWeek"></a>
  <h3>getWeek()</h3>
  <p>Gets the current week number. Depends on <a href="#dquery.i8n.weekstart">weekstart</a> configuration.</p>
  <h4>Example</h4>
  <pre class="example">var currentWeek = dquery().getWeek();</pre>

  <a name="isLeapYear"></a>
  <h3>isLeapYear()</h3>
  <p>Returns whether year is a leap year.</p>
  <h4>Example</h4>
  <pre class="example">var isLeapYear = dquery().isLeapYear();</pre>

  <a name="isTomorrow"></a>
  <h3>isTomorrow()</h3>
  <p>Returns whether day is tomorrow.</p>
  <h4>Example</h4>
  <pre class="example">var date = dquery("some date"); 
if (date.isTomorrow()) {
  alert("Tomorrow!");
}</pre>

  <a name="isYesterday"></a>
  <h3>isYesterday()</h3>
  <p>Returns whether day is yesterday.</p>
  <h4>Example</h4>
  <pre class="example">var date = dquery("some date");
if (date.isYesterday()) {
  alert("Yesterday!");
}</pre>

  <a name="lastDayOfMonth"></a>
  <h3>lastDayOfMonth()</h3>
  <p>Sets date to last day of current date's month.</p>
  <h4>Example</h4>
  <pre class="example">var foo = dquery().lastDayOfMonth();</pre>

  <a name="lastDayOfYear"></a>
  <h3>lastDayOfYear()</h3>
  <p>Sets date to the last day of the current date's year.</p>
  <h4>Example</h4>
  <pre class="example">var foo = dquery().lastDayOfYear();</pre>

  <a name="next"></a>
  <h3>next( day [, options ] )</h3>
  <p>Skips to the next day which matches ``day''.</p>
  <table>
    <tr>
    <td valign="top">
      <code>day</code>
    </td>
    <td valign="top"> 
      should be either 
      <code>"sunday"</code>, <code>"monday"</code>, <code>"tuesday"</code>,
      <code>"wednesday"</code>, <code>"thursday"</code>, <code>"friday"</code>,
      <code>"saturday"</code>
    </td>
    </tr>
    <tr>
    <td valign="top">
      <code>options</code> (optional)
    </td>
    <td valign="top">should be an object. Properties: <code>exceptSame</code> which can be <code>true</code>/<code>false</code>. Default is <code>false</code>. If <code>true</code>, dquery won't do anything if the current date's day is the same as <code>day</code>.
    </td>
    </tr>
  </table>

  <a name="prev"></a>
  <h3>prev( day [, options ] )</h3>
  <p>Skips to the previous day which matches ``day''.</p>
  <table>
    <tr>
    <td valign="top">
      <code>day</code>
    </td>
    <td valign="top"> 
      should be either 
      <code>"sunday"</code>, <code>"monday"</code>, <code>"tuesday"</code>,
      <code>"wednesday"</code>, <code>"thursday"</code>, <code>"friday"</code>,
      <code>"saturday"</code>
    </td>
    </tr>
    <tr>
    <td valign="top">
      <code>options</code> (optional)
    </td>
    <td valign="top">should be an object. Properties: <code>exceptSame</code> which can be <code>true</code>/<code>false</code>. Default is <code>false</code>. If <code>true</code>, dquery won't do anything if the current date's day is the same as <code>day</code>.
    </td>
    </tr>
  </table>

  <a name="resetDate"></a>
  <h3>resetDate()</h3>
  <p>Resets date to <code>1970-01-01</code></p>

  <a name="resetTime"></a>
  <h3>resetTime()</h3>
  <p>Resets time to <code>00:00:00.0</code></p>

  <a name="sameDate"></a>
  <h3>sameDate( date )</h3>
  <p>Compares to <code>date</code>. Returns true if year, month and date is the same.</p>

  <a name="set"></a>
  <h3>set( unit, value )</h3>
  <h3>set( options )</h3>
  <p>Sets unit to value.</p>
  <table>
    <tr>
    <td valign="top">
      <code>unit</code>
    </td>
    <td valign="top">
      can be <code>"date"</code>, <code>"year"</code>, <code>"month"</code>,
      <code>"seconds"</code>, <code>"minutes"</code>, <code>"hours"</code>,
      <code>"ms"</code>.
    </td>
    </tr>
    <tr>
    <td valign="top">
      <code>value</td>
    </td>
    <td valign="top">
      any numeric value that applies to <code>unit</code>.
    </td>
    </tr>
    <tr>
    <td valign="top">
      <code>options</code>
    </td>
    <td valign="top">
      map that contains units/value.<br />
      See <code>unit</code> parameter above.
    </td>
    </tr>
  </table>

  <a name="setWeek"></a>
  <h3>setWeek( week )</h3>
  <p>Sets week to <code>week</code>.</p>

  <h2>dquery core</h2>
  <a name="dquery"></a>
  <h3>dquery( timestamp )</h3>
  <h3>dquery( dateString )</h3>
  <h3>dquery( date )</h3>
  <h3>dquery()</h3>
  <p>Constructs a dquery object.</p>
  <table>
    <tr>
    <td valign="top">
      <code>timestamp</code>
    </td>
    <td valign="top">
      A millisecond timestamp.
    </td>
    </tr>
    <tr>
      <td valign="top">
        <code>dateString</code>
      </td>
      <td valign="top">
        A string representation of a date.<br />
        Accepted formats are:<br />
        <code>ddd, dd mmm yy} HH:MM:ss tz</code><br />
        <code>mm/dd/yy</code><br />
        <code>mm/dd/yy HH:MM</code><br />
        <code>mm/dd/yy HH:MM:ss</code><br />
        <code>yy</code><br />
        <code>yy-mm</code><br />
        <code>yy-mm-dd</code><br />
        <code>yymmdd</code><br />
        <code>yy-mm-dd HH:MM</code><br />
        <code>yy-mm-dd HH:MM:ss</code><br />
        <code>yy-mm-ddTHH:MM:sstz</code><br />
        <code>yy-mm-ddTHH:MM:ssZ</code><br /><br />

        See <a href="#format">format</a> for more information.

      </td>
    </tr>
    <tr>
      <td valign="top">
        <code>date</code>
      </td>
      <td valign="top">
        An instance of Date
      </td>
    </tr>
  </table>

  <a name="dquery.collect"></a>
  <h3>dquery.collect( options )</h3>
  <p>Does the same as <a href="#dquery.iterate">dquery.iterate</a>, except that it returns a list of all the iterated values.</p>

  <a name="dquery.iterate"></a>
  <h3>dquery.iterate( options, callback )</h3>
  <p>
    Runs through all dates between a <code>start</code> and a <code>stop</code> date.
  </p>
  <table>
    <tr>
    <td valign="top">
      <code>start</code>
    </td>
    <td valign="top">
      Start date. Can be of type <code>Date</code>, <code>dquery</code>, a valid date string, or a timestamp.
    </td>
    </tr>
    <tr>
    <td valign="top">
      <code>stop</code>
    </td>
    <td valign="top">
      Stop date. Can be of type <code>Date</code>, <code>dquery</code>, a valid date string, or a timestamp.
    </td>
    </tr>
    <tr>
    <td valign="top">
      <code>metric</code>
    </td>
    <td valign="top">
      What unit to increment. Can be <code>"milliseconds"</code>, 
      <code>"seconds"</code>, <code>"minutes"</code>, <code>"hours"</code>,
      <code>"days"</code>, <code>"weeks"</code>, <code>"months"</code>,
      <code>"years"</code>.
    </td>
    </tr>
    <tr>
    <td valign="top">
      <code>step</code>
    </td>
    <td valign="top">
      How much to increment at each step. Default is <code>1</code>.
    </td>
    </tr>
    <tr>
    <td valign="top">
      <code>filter</code>
    </td>
    <td valign="top">
      <strong>function( date )</strong><br />
      <code>callback</code> will be called if function returns true. <code>date</code> is the current iterated date.
    </td>
    </tr>
  </table>
 
  <h2>i8n:</h2>

  <a name="dquery.i8n.ampm"></a>
  <h3>dquery.i8n.ampm</h3>
  <p><strong>Array</strong> of language representation of am/pm. Default is <code>["am", "pm"]</code>.</p>

  <a name="dquery.i8n.weekdays"></a>
  <h3>dquery.i8n.weekdays</h3>
  <p><strong>Array</strong> of language representations of weekdays. Default is <code>["Sun", "Mon", Tue", "Wed", "Thu", "Fri", "Sat", "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]</code>.</p>

  <a name="dquery.i8n.weekstart"></a>
  <h3>dquery.i8n.weekstart</h3>
  <p><strong>String</strong> of which day a week starts from. Default is <code>"monday"</code>.</p>

  <a name="dquery.i8n.months"></a>
  <h3>dquery.i8n.months</h3>
  <p><strong>Array</strong> of language representations of months. Default is <code>["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", "January", "February", "Mars", "April", "May", "June", "July", "August", "September", "October", "November", "December"]</code>.</p>

  <h2>dquery.DateList object</h2>

  <a name="dquery.DateList"></a>
  <h3>dquery.DateList</h3>
  <p>dquery.DateList is a class that is supposed to hold a bunch of dates.</p>
  <p>
    It has utility functions, like <a href="#dquery.DateList.each">each</a> 
    and <a href="#dquery.DateList.map">map</a>. Functions like <a href="#dquery.daysOfWeek">daysOfWeek</a> and <a href="#dquery.daysOfMonth">daysOfMonth</a> returns a <code>DateList</code> containing the results.
  </p>

  <a name="dquery.DateList.each"></a>
  <h3>each( callback )</h3>
  <p>Calls a callback function on each date in the list.</p>
  <h4>Example</h4>
  <pre class="example">dquery().daysInWeek().each(function(date) {
  alert(date);
});
</pre>

  <a name="dquery.DateList.map"></a>
  <h3>map( callback )</h3>
  <p>Calls a callback function on each date in the list, and collects the return values from the callback function into a new list, which is returned.</p>
  <h4>Example</h4>
  <pre class="example">var formattedDays = dquery().daysInWeek().map(function(date) {
  return date.format("yyyy-mm-dd");
});
</pre>
</body>
</html>
